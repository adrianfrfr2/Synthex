local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function showStaffWarningUI()
    if LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild("StaffWarningUI") then return end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "StaffWarningUI"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.4, 0, 0.25, 0)
    frame.Position = UDim2.new(0.3, 0, 0.35, 0)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    frame.BackgroundTransparency = 0
    frame.BorderSizePixel = 0
    frame.AnchorPoint = Vector2.new(0, 0)
    frame.Parent = screenGui

    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)
    Instance.new("UIStroke", frame).Color = Color3.fromRGB(255, 100, 100)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0.6, -20)
    label.Position = UDim2.new(0, 10, 0, 10)
    label.BackgroundTransparency = 1
    label.Text = "⚠️ Staff Member Detected in Server"
    label.TextColor3 = Color3.fromRGB(255, 85, 85)
    label.Font = Enum.Font.GothamBold
    label.TextScaled = true
    label.Parent = frame

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.5, 0, 0.25, 0)
    button.Position = UDim2.new(0.25, 0, 0.7, 0)
    button.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
    button.Text = "Okay"
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.GothamSemibold
    button.TextScaled = true
    button.Parent = frame

    Instance.new("UICorner", button).CornerRadius = UDim.new(0, 8)

    button.MouseButton1Click:Connect(function()
        local TweenService = game:GetService("TweenService")
        local info = TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        TweenService:Create(frame, info, {BackgroundTransparency = 1}):Play()
        for _, obj in pairs(frame:GetChildren()) do
            if obj:IsA("TextLabel") or obj:IsA("TextButton") then
                TweenService:Create(obj, info, {
                    TextTransparency = 1,
                    BackgroundTransparency = 1
                }):Play()
            end
        end
        task.delay(0.5, function()
            screenGui:Destroy()
        end)
    end)
end

local function checkForStaff()
    for _, player in ipairs(Players:GetPlayers()) do
        local char = workspace:FindFirstChild(player.Name)
        if char and char:FindFirstChild("HumanoidRootPart") then
            local gui = char.HumanoidRootPart:FindFirstChild("OverheadGui")
            local rank = gui and gui:FindFirstChild("Rank")
            if rank and typeof(rank.Text) == "string" then
                local text = rank.Text
                if text == "Staff" or text == "STAFF" or text == "staff" then
                    showStaffWarningUI()
                    return
                end
            end
        end
    end
end

repeat task.wait() until LocalPlayer.Character and LocalPlayer:FindFirstChild("PlayerGui")

while true do
    checkForStaff()
    task.wait(1)
end
